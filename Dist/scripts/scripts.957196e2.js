"use strict";angular.module("educomApp",["ngCookies","ngRoute","ui.materialize"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"views/panelgrupos.html",controller:"PanelgruposCtrl",controllerAs:"grupos"}).when("/mensajes",{templateUrl:"views/panelmensajes.html",controller:"PanelmensajesCtrl",controllerAs:"mensajes"}).when("/centro",{templateUrl:"views/admincentro.html",controller:"AdmincentroCtrl",controllerAs:"centro"}).when("/grupos",{templateUrl:"views/admingrupos.html",controller:"AdmingruposCtrl",controllerAs:"adminGrupos"}).when("/tipos",{templateUrl:"views/admintipos.html",controller:"AdmintiposCtrl",controllerAs:"tipos"}).when("/usuarios",{templateUrl:"views/adminusuarios.html",controller:"AdminusuariosCtrl",controllerAs:"usuarios"}).when("/administrar",{templateUrl:"views/panelusuario.html",controller:"PanelusuarioCtrl",controllerAs:"usuario"}).otherwise({redirectTo:"/"})}]),angular.module("educomApp").factory("myFactory",function(){return{usuario:"",miembrosUsuario:"",miembros:"",grupoActivo:"",mensaje:"",tipo:"",responsable:""}}),angular.module("educomApp").service("myService",["$http",function(a){var b="http://localhost:8080/EduCom/webresources/";this.getUsuario=function(c){return a.get(b+"usuarios/"+c)},this.newUsuario=function(c){return a.post(b+"usuarios",c)},this.getUsuariosByCentro=function(c){return a.get(b+"usuarios/centro="+c)},this.setUsuario=function(c){return a.put(b+"usuarios/"+c.idUsuario,c)},this.setMiembro=function(c){return a.put(b+"miembros/miembrosPK;idUsuario="+c.usuario.idUsuario+";idGrupo="+c.grupo.idGrupo,c)},this.getGrupos=function(c){return a.get(b+"miembros/usuario="+c)},this.getGrupo=function(c){return a.get(b+"grupos/"+c)},this.newGrupo=function(c){return a.post(b+"grupos",c)},this.editGrupo=function(c){return a.put(b+"grupos/"+c.idGrupo,c)},this.getGruposByCentro=function(c){return a.get(b+"grupos/centro="+c)},this.exitGrupo=function(c,d){return a["delete"](b+"miembros/miembroPK;idUsuario="+c+";idGrupo="+d)},this.getMensajes=function(c){return a.get(b+"mensajes/grupo="+c)},this.createMensaje=function(c){return a.post(b+"mensajes/",c)},this.editMensaje=function(c){return a.put(b+"mensajes/"+c.idMensaje,c)},this.deleteMensaje=function(c){return a["delete"](b+"mensajes/"+c)},this.getTiposByUsuario=function(c){return a.get(b+"usuariotipousuario/usuario="+c)},this.newTipo=function(c){return a.post(b+"tipousuarios",c)},this.getTipos=function(){return a.get(b+"tipousuarios")},this.editTipos=function(c,d){return a.put(b+"usuariotipousuario/usaurioTipoUsuarioPK;idUsuario="+c+";idTipoUsuario="+d)},this.getLogin=function(c){return a.get(b+"logins/idUsuario="+c)},this.newLogin=function(c){return a.post(b+"logins",c)},this.setPassword=function(c,d,e){return a.put(b+"logins/usuario="+c+"/"+d+"/"+e)},this.resetPassword=function(c){return a.get(b+"logins/resetPassword/idUsuario="+c)},this.setCentro=function(c){return a.put(b+"centros/"+c.idCentro,c)}}]),angular.module("educomApp").controller("MenulateralCtrl",["$cookies","$window","myService","myFactory",function(a,b,c,d){function e(){a.remove("idUsuario"),alert("Asta luego "+d.usuario.nombre+"."),b.location.href="login.html"}var f=this;if(f.nombre="",f.centro="",f.salir=e,f.cerrar=function(){$(".button-collapse").sideNav("hide")},f.tipoAdmin=function(){return 1===d.tipo?!0:!1},a.get("idUsuario")){var g=a.get("idUsuario");c.getUsuario(g).success(function(e){d.usuario=e,f.nombre=e.nombre,f.centro=e.idCentro.nombre,c.getTiposByUsuario(a.get("idUsuario")).success(function(a){$.isEmptyObject(a)?(d.tipo="4",f.tipo=4,b.location.href="#/home "):(f.tipo=a[0].tipoUsuario.idTipoUsuario,d.tipo=a[0].tipoUsuario.idTipoUsuario,b.location.href="#/home ")})})}else b.location.href="login.html"}]),angular.module("educomApp").controller("PanelgruposCtrl",["$window","$cookies","myFactory","myService",function(a,b,c,d){function e(){m.fdatos.idGrupo="0",m.fdatos.nombre="",m.fdatos.descripcion="",m.fdatos.privado="1",$("#grupoModal").openModal()}function f(){d.getGruposByCentro(c.usuario.idCentro.idCentro).success(function(a){m.entrar=a,$("#modalEntrarGrupo").openModal()})}function g(){var a=m.grupoEntrarSelect;d.getGrupo(a).success(function(a){if(a.privado){var b={};b.autor=c.usuario,b.idGrupo=a,b.texto="El usuario "+c.usuario.nombre+" quiere unirse a este grupo.",b.idMensaje="0",d.createMensaje(b).success(function(){alert("Es un grupo privado, se ha enviado una solicitud para entrar en el grupo.")})}else{var e={grupo:a,usuario:c.usuario,responsable:"0"};d.setMiembro(e).success(function(){alert("Es un grupo público y as sido añadido directamente."),$("#modalEntrarGrupo").closeModal(),location.reload()})}})}function h(a){m.miembro.responsable="0",c.grupoActivo=a,d.getUsuariosByCentro(c.usuario.idCentro.idCentro).success(function(a){m.usuariosSelect=a}),$("#modalEditarMiembro").openModal()}function i(){var a={};a.usuario=m.miembro.usuario,a.grupo=c.grupoActivo,a.responsable=m.miembro.responsable,d.setMiembro(a).success(function(){alert("Usuario modificado."),$("#modalEditarMiembro").closeModal(),location.reload()})}function j(a){m.fdatos.idGrupo=a.idGrupo,m.fdatos.nombre=a.nombre,m.fdatos.descripcion=a.descripcion,m.fdatos.privado=a.privado,m.fdatos.idUsuarioSuperadministrador=a.idUsuarioSuperadministrador,$("#grupoModal").openModal()}function k(){"0"===m.fdatos.idGrupo?(m.fdatos.idUsuarioSuperadministrador=c.usuario,d.newGrupo(m.fdatos).success(function(){alert("Nuevo Grupo creado."),$("#grupoModal").closeModal(),location.reload()})):d.editGrupo(m.fdatos).success(function(){alert("Grupo editado."),$("#grupoModal").closeModal(),location.reload()})}function l(b){c.grupoActivo=b.grupo,c.responsable=b.responsable,a.location.href="#/mensajes"}var m=this;m.fdatos={},m.miembro={},m.preloader=!0,d.getGrupos(b.get("idUsuario")).success(function(a){m.grupos=a,c.miembrosUsuario=a,m.preloader=!1}),m.modalEntrarGrupo=f,m.btnEntrarGrupo=g,m.modalEditarMiembros=h,m.guardarMiembro=i,m.modalNuevoGrupo=e,m.modalEditarGrupo=j,m.guardarGrupo=k,m.verMensajes=l}]),angular.module("educomApp").controller("PanelmensajesCtrl",["$window","myService","myFactory",function(a,b,c){function d(){l.fdatos={},l.fdatos.autor=c.usuario,l.fdatos.idGrupo=c.grupoActivo,l.fdatos.texto="",l.fdatos.idMensaje="0",$("#modalMensaje").openModal()}function e(a){l.fdatos=a,l.fdatos.estado="Modificado por "+c.usuario.nombre,$("#modalMensaje").openModal()}function f(a){c.mensaje=a,$("#modalBorrar").openModal()}function g(){b.deleteMensaje(c.mensaje).success(function(){alert("Mensaje borrado."),$("#modalBorrar").closeModal(),a.location.href="#/home"})}function h(){"0"==l.fdatos.idMensaje?b.createMensaje(l.fdatos).success(function(){alert("Mensaje enviado."),$("#modalMensaje").closeModal(),a.location.href="#/home"}):b.editMensaje(l.fdatos).success(function(){alert("Mensaje editado"),$("#modalMensaje").closeModal(),a.location.href="#/home"})}function i(){$("#modalSalir").openModal()}function j(){$("#modalSalir").closeModal(),b.exitGrupo(c.usuario.idUsuario,c.grupoActivo.idGrupo).success(function(){alert("Has salido del Grupo."),a.location.href="#/home"})}function k(a){var b=a.substring(0,4),c=a.substring(5,7),d=a.substring(8,10),e=a.substring(11,19);return"El "+d+"/"+c+"/"+b+" a las "+e+"."}var l=this;$("textarea.materialize-textarea").characterCounter(),b.getMensajes(c.grupoActivo.idGrupo).success(function(a){l.mensajes=a}),l.responsable=c.responsable,l.nuevoMensaje=d,l.editarMensaje=e,l.guardarMensaje=h,l.borrarMensaje=f,l.borrarMensajeBtn=g,l.salirGrupo=i,l.salirGrupoBtn=j,l.formatearFecha=k}]),angular.module("educomApp").controller("PanelusuarioCtrl",["myFactory","myService",function(a,b){function c(){$("#modal2").openModal()}function d(){a.usuario.nombre=f.nombre,b.setUsuario(a.usuario).success(function(){alert("Usuario modificado."),location.reload()})}function e(){f.passwordNuevo!==f.passwordNuevo2?alert("Los nuevos password no son idénticos."):b.setPassword(a.usuario.idUsuario,f.passwordViejo,f.passwordNuevo).success(function(a){console.log(a),$.isEmptyObject(a)?alert("Password no cambiado."):(alert("Password cambiado."),$("#modal2").closeModal(),location.reload())})}var f=this;f.nombre=a.usuario.nombre,f.tipo="",b.getLogin(a.usuario.idUsuario).success(function(a){f.email=a.user}),b.getTiposByUsuario(a.usuario.idUsuario).success(function(a){f.tipos=a}),f.centro=a.usuario.idCentro.nombre,f.direccion=a.usuario.idCentro.direccion,f.descripcion=a.usuario.idCentro.descripcion;var g=a.miembrosUsuario;f.inscrito=[],f.responsable=[],$.each(g,function(a){g[a].responsable?f.responsable.push(g[a].grupo):f.inscrito.push(g[a].grupo)}),f.passwordViejo="",f.passwordNuevo="",f.passwordNuevo2="",f.cambiarPassword=c,f.guardarCambios=d,f.guardarPassword=e}]),angular.module("educomApp").controller("AdminusuariosCtrl",["myFactory","myService",function(a,b){function c(){b.getLogin(f.usuarioReset).success(function(a){f.nombre=a.idUsuario.nombre,f.user=a.user})}function d(){b.resetPassword(f.usuarioReset).success(function(){alert("Contraseña reseteada y enviado un nuevo correo al usuario")})}function e(){var c={nombre:f.nombre,idCentro:a.usuario.idCentro},d={idUsuario:c,user:f.user};b.newUsuario(c).success(function(){b.newLogin(d).success(function(){alert("El usuario ha sido creado y enviado un email a su correo con el password de acceso."),location.reload()})})}var f=this;f.nombre="",f.user="",b.getUsuariosByCentro(a.usuario.idCentro.idCentro).success(function(a){f.usuariosSelect=a}),f.buscarLogin=c,f.reset=d,f.nuevo=e}]),angular.module("educomApp").controller("AdmintiposCtrl",["myService","myFactory",function(a,b){function c(){var b={nombre:e.nombre};a.newTipo(b).success(function(){alert("Tipo nuevo de usuario creado."),location.reload()})}function d(){$.each(e.usuariosSelect,function(b){a.editTipos(e.usuariosSelect[b],e.tipoSelect.idTipoUsuario).success(function(){console.log("Usuario añadido.")})}),alert("Usuarios añadidos al tipo "+e.tipoSelect.nombre),location.reload()}var e=this;e.nombre="",a.getTipos().success(function(a){e.tipos=a}),a.getUsuariosByCentro(b.usuario.idCentro.idCentro).success(function(a){e.usuarios=a}),e.tipoSelect=[],e.usuariosSelect=[],e.nuevoTipo=c,e.guardar=d}]),angular.module("educomApp").controller("AdmincentroCtrl",["myFactory","myService",function(a,b){function c(){a.usuario.idCentro.nombre=d.nombre,a.usuario.idCentro.direccion=d.direccion,a.usuario.idCentro.descripcion=d.descripcion,b.setCentro(a.usuario.idCentro).success(function(){alert("Centro modificado."),location.reload()})}var d=this,e=a.usuario.idCentro;d.nombre=e.nombre,d.direccion=e.direccion,d.descripcion=e.descripcion,d.guardar=c}]),angular.module("educomApp").controller("AdmingruposCtrl",["myService","myFactory",function(a,b){function c(){f.grupoActivo.nombre=f.nombre,f.grupoActivo.descripcion=f.descripcion,f.grupoActivo.privado=f.privado;var b={grupo:f.grupoActivo,usuario:"",responsable:"0"};f.usuariosActivos&&$.each(f.usuariosActivos,function(c){b.usuario=f.usuariosActivos[c],a.setMiembro(b).error(function(){alert("error")})}),a.editGrupo(f.grupoActivo).success(function(){alert("Grupo Modificado y añadido sus miembros.")})}function d(){f.nombre=f.grupoActivo.nombre,f.descripcion=f.grupoActivo.descripcion,f.privado=f.grupoActivo.privado}function e(){return f.nombre?"active":""}var f=this;f.grupoActivo="",f.nombre="",f.descripcion="",f.privado="0",a.getGruposByCentro(b.usuario.idCentro.idCentro).success(function(a){f.gruposSelect=a}),a.getUsuariosByCentro(b.usuario.idCentro.idCentro).success(function(a){f.usuariosSelect=a}),f.guardar=c,f.editGrupo=d,f.activar=e}]),angular.module("educomApp").run(["$templateCache",function(a){a.put("views/admincentro.html",'<br> <a tooltipped href="#/home" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Regresar"><i class="material-icons"> fast_rewind</i></a> <div class="card-panel"> <form class="container"> <blockquote>Aquí podrás modificar los datos de tu centro.</blockquote> <div class="row"> <div class="input-field col s10 m8"> <input id="centroNombre" ng-model="centro.nombre" type="text"> <label class="active" for="centroNombre">Nombre del Centro</label> </div> </div> <div class="row"> <div class="input-field col s10 m8"> <input ng-model="centro.direccion" id="centroDireccion" type="text"> <label class="active" for="centroDireccion">Dirección</label> </div> </div> <div class="row"> <div class="input-field col s12 m8"> <input ng-model="centro.descripcion" id="centroDescripcion" type="text"> <label class="active" for="centroDescripcion">Descripción</label> </div> </div> <div class="center-align"> <a ng-click="centro.guardar()" class="waves-effect waves-light btn"><i class="material-icons right">send</i>Guardar</a> </div> </form> </div>'),a.put("views/admingrupos.html",'<br> <a tooltipped href="#/home" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" tooltipped data-tooltip="Regresar"><i class="material-icons"> fast_rewind</i></a> <div class="card-panel"> <form ng-submit="adminGrupos.guardar()" class="container"> <blockquote> Aquí podrás editar los grupos creados en el centro y añadir miembros. </blockquote> <div class="container"> <div class="row"> <div class="col s12 m8 l8"> <label for="gruposSelect"> Escoge el grupo a modificar.</label> <select ng-model="adminGrupos.grupoActivo" ng-options="grupo as grupo.nombre for grupo in adminGrupos.gruposSelect" ng-change="adminGrupos.editGrupo()" material-select watch required> <option value="">Escoge el grupo a modificar... </option></select> </div> </div> <div class="row"> <div class="input-field col l12"> <label ng-class="adminGrupos.activar()">Nombre del Grupo</label> <input ng-model="adminGrupos.nombre" type="text" required> </div> <div class="input-field col l12"> <label ng-class="adminGrupos.activar()">Descripción del Grupo</label> <textarea ng-model="adminGrupos.descripcion" class="materialize-textarea" required></textarea> </div> <p> <input class="with-gap" ng-model="adminGrupos.privado" type="radio" id="privadoA" value="1"> <label for="privadoA">Privado</label> <input class="with-gap" ng-model="adminGrupos.privado" name="privadoCheckA" type="radio" id="publicoA" value="0"> <label for="publicoA">Público</label> </p> </div> <div class="row"> <div class="col s12"> <label> Escoge a los usuarios </label> <select data-placeholder="Escoge a los usuarios..." ng-model="adminGrupos.usuariosActivos" ng-options="user as user.nombre for user in adminGrupos.usuariosSelect" multiple material-select watch> </select> </div> </div> <div class="row"> <div class="center-align input-field col l12"> <button class="center btn waves-effect waves-light" type="submit">Guardar <i class="material-icons right">reorder</i> </button> </div> </div> </div> </form> </div>'),a.put("views/admintipos.html",'<br> <a tooltipped href="#/home" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Regresar"><i class="material-icons"> fast_rewind</i></a> <div class="card-panel"> <div class="container"> <blockquote>Inserta un tipo nuevo de usuario directamente rellenando los datos y pulsando nuevo o busca un tipo existente para añadir a usuarios.</blockquote> <div class="row"> <div class="input-field col s12 m8"> <input id="tipoNombre" ng-model="tipos.nombre" type="text"> <label for="tipoNombre">Tipo de Usuario</label> </div> </div> <div class="center-align"> <a ng-click="tipos.nuevoTipo()" class="waves-effect waves-light btn"><i class="material-icons right">add</i>Nuevo</a> </div> <br> <div class="row"> <div class="col s12 m6"> <label>Escoge el tipo de usuario correspondiente</label> <select ng-model="tipos.tipoSelect" ng-options="tipo as tipo.nombre for tipo in tipos.tipos" material-select watch> <option value="">Escoge El tipo de usuario...</option> </select> </div> </div> <div class="row"> <div class="col s12"> <label> Escoge el tipo de usuario</label> <select ng-model="tipos.usuariosSelect" ng-options="usuario.idUsuario as usuario.nombre for usuario in tipos.usuarios" data-placeholder="Escoge a los usuarios" multiple material-select watch> </select> </div> </div> <div class="center-align"> <a ng-click="tipos.guardar()" class="waves-effect waves-light btn"><i class="material-icons right">send</i>Guardar</a> </div> </div> </div>'),a.put("views/adminusuarios.html",'<br> <a tooltipped href="#/home" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Regresar"><i class="material-icons"> fast_rewind</i></a> <div id="administrarUsuario"> <div class="card-panel"> <form class="container"> <blockquote> Inserta un usuario directamente rellenando los datos y pulsando nuevo o busca un usuario existente para resetear y enviarle su nuevo password de acceso. </blockquote> <div class="row"> <div class="col s12 m8 l6"> <label> Escoge el usuario o crea uno nuevo.</label> <select ng-model="usuarios.usuarioReset" ng-options="u.idUsuario as u.nombre for u in usuarios.usuariosSelect" ng-change="usuarios.buscarLogin()" material-select watch> <option value="">---Selecciona un usuario---</option> </select> </div> </div> <div class="row"> <div class="input-field col s12 m8"> <input ng-model="usuarios.nombre" id="usuarioNombre" type="text"> <label ng-class="usuarios.nombre ?\'active\':\'\'" for="usuarioNombre">Nombre y Apellidos</label> </div> <div class="input-field col s12 m8"> <input ng-model="usuarios.user" id="usuarioEmail" type="text"> <label ng-class="usuarios.user ?\'active\':\'\'" for="usuarioEmail">Email</label> </div> </div> <div class="row center-align"> <a ng-click="usuarios.reset()" class="waves-effect waves-light btn"><i class="material-icons right">vpn_key</i>Reset Password</a> <a ng-click="usuarios.nuevo()" class="waves-effect waves-light btn"><i class="material-icons right">add</i>Nuevo</a> </div> <br> <blockquote>También se puede cargar una lista de usuarios a través de un archivo .csv</blockquote> <div class="file-field input-field"> <div class="btn"> <span>Archivo</span> <input type="file"> </div> <div class="file-path-wrapper"> <input class="file-path validate" type="text"> </div> </div> <div class="row center-align"> <a id="cargarUsuarios" class="waves-effect waves-light btn"><i class="material-icons right">add</i>Gargar</a> </div> </form> </div> </div>'),a.put("views/panelgrupos.html",'<br> <a tooltipped ng-show="menu.tipo <=2? true:false" ng-click="grupos.modalNuevoGrupo()" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Nuevo Grupo"><i class="material-icons">add</i></a> <a tooltipped ng-click="grupos.modalEntrarGrupo()" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Entrar en Grupo"><i class="material-icons">input</i></a> <div ng-show="grupos.preloader" class="preloader-wrapper big active preloader"> <div class="spinner-layer spinner-blue-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div ng-repeat="grupo in grupos.grupos" class="card small"> <div class="card-image waves-effect waves-block waves-light"> <img class="activator" src="images/office.80a05fca.jpg"> </div> <div class="card-content"> <span class="card-title activator grey-text text-darken-4">{{grupo.grupo.nombre}}<i class="material-icons right">more_vert</i></span> <br> <span ng-show="grupo.responsable || grupo.grupo.idUsuarioSuperadministrador.idUsuario==grupo.usuario.idUsuario"> <a tooltipped ng-click="grupos.modalEditarMiembros(grupo.grupo)" class="btn-floating btn-medium waves-effect waves-light modal-trigger tooltipped" data-position="bottom" data-tooltip="Editar Miembros"><i class="material-icons">recent_actors</i></a> <a tooltipped ng-click="grupos.modalEditarGrupo(grupo.grupo)" class="btn-floating btn-medium waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Editar Grupo"><i class="material-icons">reorder</i></a> </span> <a tooltipped ng-click="grupos.verMensajes(grupo)" class="btn-floating btn-medium waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Ver Mensajes"><i class="material-icons">question_answer</i></a> </div> <div class="card-reveal"> <span class="card-title grey-text text-darken-4"><i class="material-icons left">comment</i>{{grupo.grupo.nombre}} <i class="material-icons right">close</i></span> <p>Autor: <span>{{grupo.grupo.idUsuarioSuperadministrador.nombre}}</span></p> <p>Descripcion: <span>{{grupo.grupo.descripcion}}</span></p> <p>El grupo es <span>{{grupo.grupo.privado==true ?"privado":"público"}}</span></p> </div> </div> <!-- Modales --> <div id="grupoModal" class="modal"> <div class="modal-content"> <h4>Nuevo/Editar Grupo</h4> <div class="divider"></div> <form name="editarGrupo" ng-submit="grupos.guardarGrupo()" class="container"> <div class="row"> <div class="input-field col l12"> <label ng-class="grupos.fdatos.nombre ?\'active\':\'\'" for="nombreGrupo">Nombre del Grupo</label> <input id="nombreGrupo" ng-model="grupos.fdatos.nombre" type="text" required> </div> <div class="input-field col l12"> <label ng-class="grupos.fdatos.descripcion ?\'active\':\'\'" for="descripcionGrupo">Descripción del Grupo</label> <input id="descripcionGrupo" ng-model="grupos.fdatos.descripcion" type="text" required> </div> <p> <input name="ceck" class="with-gap" id="privado" ng-model="grupos.fdatos.privado" type="radio" value="1"> <label for="privado">Privado:</label> <input name="ceck" class="with-gap" id="publico" ng-model="grupos.fdatos.privado" type="radio" value="0"> <label for="publico">Público:</label> </p> </div> <div class="row"> <div class="center-align input-field col l12"> <button type="submit" class="center btn waves-effect waves-light">Guardar <i class="material-icons right">send</i> </button> </div> </div> </form> </div> <div class="modal-footer"> <a class="modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a> </div> </div> <div id="modalEditarMiembro" class="modal"> <div class="modal-content"> <h4>Nuevo/Modificar Miembro</h4> <div class="divider"></div> <div class="container"> <div class="row"> <p> <label class="active" for="usuarioCentro">Escoge a los usuarios que quieres agregar:</label> <select ng-options="usuario as usuario.nombre for usuario in grupos.usuariosSelect" ng-model="grupos.miembro.usuario" material-select watch id="usuarioCentro" required> <option value="">Elige un Usuario...</option> </select> </p> <p>Quieres que sea Responsable? </p> <p> <input class="with-gap" ng-model="grupos.miembro.responsable" name="responsablesCheck" type="radio" id="siResponsable" value="1"> <label for="siResponsable">Si</label> </p> <p> <input class="with-gap" ng-model="grupos.miembro.responsable" name="responsablesCheck" type="radio" id="noResponsable" value="0"> <label for="noResponsable">No</label> <br> <br> </p> </div> <div class="row center-align"> <button class="btn waves-effect waves-light" ng-click="grupos.guardarMiembro()">Agregar <i class="material-icons right">send</i> </button> </div> </div> </div> <div class="modal-footer"> <a class="modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a> </div> </div> <div id="modalEntrarGrupo" class="modal"> <div class="modal-content"> <h4>Entrar Grupo</h4> <div class="divider"></div> <form ng-submit="grupos.btnEntrarGrupo()" class="container"> <div class="row"> <p> <label class="active">Nombre del Grupo</label> <select ng-options="grupo.idGrupo as grupo.nombre for grupo in grupos.entrar" ng-model="grupos.grupoEntrarSelect" material-select watch> <option value="">Elige un Grupo...</option> </select> </p> </div> <div class="row center-align"> <button class="btn waves-effect waves-light">entrar <i class="material-icons right">send</i> </button> </div> </form> </div> <div class="modal-footer"> <a class="modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a> </div> </div>'),a.put("views/panelmensajes.html",'<br> <a tooltipped href="#/home" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Regresar"><i class="material-icons"> fast_rewind</i></a> <a tooltipped ng-show="mensajes.responsable" ng-click="mensajes.nuevoMensaje()" class="ng-hide btn-floating btn-large waves-effect waves-light tooltipped" ng- data-position="bottom" data-tooltip="Nuevo Mensaje"><i class="material-icons">mode_edit</i></a> <a tooltipped ng-click="mensajes.salirGrupo()" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Salir del Grupo"><i class="material-icons">delete</i></a> <ul class="collapsible popout" data-collapsible="accordion" watch> <li ng-repeat="mensaje in mensajes.mensajes" material-collapsible> <div class="collapsible-header"><i class="material-icons left">perm_identity</i>{{mensaje.autor.nombre}}</div> <div class="collapsible-body"> <p>{{mensaje.texto}}</p> <b class="right estado">{{mensaje.estado}} {{mensajes.formatearFecha(mensaje.modificado)}}</b> <br> <div class="divider"></div> <div ng-show="mensajes.responsable" class="btnMensajes"> <a tooltipped ng-click="mensajes.nuevoMensaje()" class="btn-floating btn-small waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Nuevo Mensaje"><i class="material-icons">mode_edit</i></a> <a tooltipped ng-click="mensajes.editarMensaje(mensaje)" class="btn-floating btn-small waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Editar Mensaje"><i class="material-icons">reorder</i></a> <a tooltipped ng-click="mensajes.borrarMensaje(mensaje.idMensaje)" class="btn-floating btn-small waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Borrar Mensaje"><i class="material-icons">delete</i></a> </div> </div> </li> </ul> <!-- Modales --> <div id="modalMensaje" class="modal"> <div class="modal-content"> <h4>Nuevo/Editar Mensaje</h4> <div class="divider"></div> <form ng-submit="mensajes.guardarMensaje()" class="container"> <div class="row"> <div class="input-field col s12"> <textarea id="textareaMensaje" ng-model="mensajes.fdatos.texto" class="materialize-textarea" length="250" spellcheck required></textarea> <label ng-class="mensajes.fdatos.texto ?\'active\':\'\'" for="textareaMensaje">Texto</label> </div> </div> <div class="row center-align"> <button type="submit" class="btn waves-effect waves-light">Guardar <i class="material-icons right">send</i> </button> </div> </form> </div> <div class="modal-footer"> <a class="modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a> </div> </div> <div id="modalSalir" class="modal"> <div class="modal-content"> <h4>Salir del Grupo</h4> <div class="divider"></div> <form ng-submit="mensajes.salirGrupoBtn()" class="container"> <div class="row"> <p>Estas Seguro que quieres salir del grupo ?</p> </div> <div class="row center-align"> <button class="btn waves-effect waves-light" id="btnSalirGrupo">Salir <i class="material-icons right">delete</i> </button> </div> </form> </div> <div class="modal-footer"> <a class="modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a> </div> </div> <div id="modalBorrar" class="modal"> <div class="modal-content"> <h4>Borrar Mensaje</h4> <div class="divider"></div> <div class="container"> <div class="row"> <p>Estas seguro de borrar este mensaje ?</p> </div> <div class="row"> <div class="center-align input-field col l12"> <button class="btn waves-effect waves-light" ng-click="mensajes.borrarMensajeBtn()">Borrar <i class="material-icons right">delete</i> </button> </div> </div> </div> </div> <div class="modal-footer"> <a class="modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a> </div> </div>'),a.put("views/panelusuario.html",'<div id="configuracionUsuario"> <br> <a tooltipped href="#/home" class="btn-floating btn-large waves-effect waves-light tooltipped" data-position="bottom" data-tooltip="Regresar"><i class="material-icons"> fast_rewind</i></a> <div class="card-panel"> <form class="container"> <h3>Datos del usuario</h3> <div class="row"> <div class="input-field col s12 m6"> <input type="text" id="nombreUsuario" ng-model="usuario.nombre" name="nombreUsuario" value=""> <label class="active" for="nombreUsuario">Nombre y Apellidos</label> </div> <div class="input-field col s12 m6"> <input disabled type="text" id="emailUsuario" ng-model="usuario.email" name="emailUsuario" value=""> <label class="active" for="emailUsuario">Email</label> </div> </div> <div class="row"> <div class="col s6"> <a ng-click="usuario.cambiarPassword()" class="waves-effect waves-light btn"><i class="material-icons right">vpn_key</i>Cambiar Password</a> </div> <div class="col s6"> <a ng-click="usuario.guardarCambios()" class="waves-effect waves-light btn"><i class="material-icons right">send</i>Guardar cambios</a> </div> </div> <div class="row"> <div class="input-field col s12 m6"> <input ng-model="usuario.centro" disabled type="text" id="centroNombreUsuario" name="centroNombreUsuario" value=""> <label class="active" for="centroNombreUsuario">Centro</label> </div> <div class="input-field col s12 m6"> <input ng-model="usuario.direccion" disabled type="text" id="centroDireccionUsuario" name="centroDireccionUsuario" value=""> <label class="active" for="centroDireccionUsuario">Direccion</label> </div> </div> <div class="row"> <div class="input-field col s12 m12"> <input ng-model="usuario.descripcion" disabled type="text" id="centroDescripcionUsuario" name="centroDescripcionUsuario" value=""> <label class="active" for="centroDescripcionUsuario">Descripción</label> </div> </div> <div class="row"> <div class="col l12"> <h5>Grupos que estas inscrito</h5> <div class="chip" ng-repeat="grupoIn in usuario.inscrito">{{grupoIn.nombre}}</div> </div> </div> <div class="divider"></div> <div class="row"> <div class="col l12"> <h5>Grupos que eres responsable</h5> <div class="chip" ng-repeat="grupoRe in usuario.responsable">{{grupoRe.nombre}}</div> </div> </div> <div class="divider"></div> <div class="row"> <div class="col l12"> <h5>Tipos de Usuario</h5> <div class="chip" ng-repeat="tipo in usuario.tipos">{{tipo.tipoUsuario.nombre}}</div> </div> </div> <div class="divider"></div> </form> </div> <div id="modal2" class="modal"> <div class="modal-content"> <h4>Cambiar password</h4> <div class="row"> <div class="input-field col s12"> <input ng-model="usuario.passwordViejo" type="password" id="viejoPassword" name="viejoPassword" value=""> <label for="viejoPassword">Antiguo Password</label> </div> <div class="input-field col s12"> <input type="password" ng-model="usuario.passwordNuevo" id="nuevoPassword" name="nuevoPassword" value=""> <label for="nuevoPassword">Nuevo Password</label> </div> <div class="input-field col s12"> <input type="password" ng-model="usuario.passwordNuevo2" id="mismoPassword" name="mismoPassword" value=""> <label for="mismoPassword">Repite el nuevo Password</label> </div> </div> <div class="row"> <div class="center-align input-field col l12"> <a ng-click="usuario.guardarPassword()" class="waves-effect waves-light btn"><i class="material-icons right">send</i>Guardar cambios</a> </div> </div> </div> <div class="modal-footer"> <a class="modal-action modal-close waves-effect waves-green btn-flat">Salir</a> </div> </div> </div>')}]);
